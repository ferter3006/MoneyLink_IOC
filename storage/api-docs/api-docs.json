{
    "openapi": "3.0.0",
    "info": {
        "title": "Money Link API",
        "description": "Documentación de la API de Money Link by Lluís Ferrater S.",
        "contact": {
            "email": "ferratersimon@gmail.com"
        },
        "version": "1.0.0"
    },
    "paths": {
        "/api/categories": {
            "get": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Lista todas las categorías disponibles",
                "description": "Obtiene la lista completa de categorías que pueden ser asignadas a los tiquets. Cualquier usuario autenticado puede consultar esta lista.",
                "operationId": "categoriesIndex",
                "responses": {
                    "200": {
                        "description": "Lista de categorías obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "categories": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Comida"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Crea una nueva categoría",
                "description": "Crea una nueva categoría que podrá ser asignada a los tiquets. Solo usuarios con rol ADMIN pueden crear categorías.",
                "operationId": "categoriesStore",
                "requestBody": {
                    "description": "Datos de la nueva categoría",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre de la categoría (mínimo 3 caracteres, máximo 255, único)",
                                        "type": "string",
                                        "example": "Comida y bebida"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Categoría creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoria creada correctamente"
                                        },
                                        "category": {
                                            "$ref": "#/components/schemas/CategoryResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo usuarios ADMIN pueden crear categorías",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Nombre inválido o duplicado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The name has already been taken."
                                        },
                                        "errors": {
                                            "properties": {
                                                "name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The name has already been taken."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/categories/{id}": {
            "delete": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Elimina una categoría",
                "description": "Elimina una categoría existente. Solo usuarios con rol ADMIN pueden eliminar categorías. Esta operación no se puede deshacer.",
                "operationId": "a2aaf6460c351666326419e77a1e2e7b",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Categoría eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoria eliminada correctamente"
                                        },
                                        "category": {
                                            "$ref": "#/components/schemas/CategoryResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo usuarios ADMIN pueden eliminar categorías",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoria no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Actualiza una categoría existente",
                "description": "Modifica el nombre de una categoría existente. Solo usuarios con rol ADMIN pueden actualizar categorías.",
                "operationId": "4caacf13d88d0173d77ac1833ec8f77e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría a actualizar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "requestBody": {
                    "description": "Nuevos datos de la categoría",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nuevo nombre de la categoría (mínimo 3 caracteres, máximo 255, único)",
                                        "type": "string",
                                        "example": "Restaurantes"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Categoría actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoria actualizada correctamente"
                                        },
                                        "category": {
                                            "$ref": "#/components/schemas/CategoryResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo usuarios ADMIN pueden actualizar categorías",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Categoria no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Nombre inválido o duplicado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The name has already been taken."
                                        },
                                        "errors": {
                                            "properties": {
                                                "name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The name has already been taken."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/invitaciones/recibidas": {
            "get": {
                "tags": [
                    "Invitaciones"
                ],
                "summary": "Lista las invitaciones recibidas",
                "description": "Obtiene todas las invitaciones pendientes que ha recibido el usuario autenticado para unirse a diferentes salas",
                "operationId": "14168f1ca7ee20a720a40d12d9a4d00a",
                "responses": {
                    "200": {
                        "description": "Lista de invitaciones recibidas obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "invitaciones": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/InvitacionResource"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/invitaciones/enviadas": {
            "get": {
                "tags": [
                    "Invitaciones"
                ],
                "summary": "Lista las invitaciones enviadas",
                "description": "Obtiene todas las invitaciones pendientes que el usuario autenticado ha enviado a otros usuarios para unirse a sus salas",
                "operationId": "64aafce95d4839270e584bdcee7019fd",
                "responses": {
                    "200": {
                        "description": "Lista de invitaciones enviadas obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "invitaciones": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/InvitacionResource"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/invitaciones": {
            "post": {
                "tags": [
                    "Invitaciones"
                ],
                "summary": "Crea una nueva invitación a una sala",
                "description": "Envía una invitación a un usuario registrado para que se una a una de tus salas. Solo puedes invitar a salas donde eres miembro. No puedes invitarte a ti mismo, invitar a usuarios que ya están en la sala, ni enviar invitaciones duplicadas.",
                "operationId": "0c1ae3b77980aa68221ccd5e5f86a5da",
                "requestBody": {
                    "description": "Datos de la invitación",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email_invitado",
                                    "sala_id"
                                ],
                                "properties": {
                                    "email_invitado": {
                                        "description": "Email del usuario registrado a invitar",
                                        "type": "string",
                                        "format": "email",
                                        "example": "amigo@example.com"
                                    },
                                    "sala_id": {
                                        "description": "ID de la sala a la que se invita",
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invitación enviada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invitación enviada correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Email no existe, no estás en la sala, usuario ya en sala, invitación duplicada o intento de autoinvitación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email_invitado": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No puedes invitarte a ti mismo."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/invitaciones/{id}": {
            "post": {
                "tags": [
                    "Invitaciones"
                ],
                "summary": "Responde a una invitación",
                "description": "Permite al destinatario aceptar o rechazar una invitación a una sala. Si se acepta, el usuario se une a la sala con rol USER. Solo el destinatario puede responder.",
                "operationId": "63b6ebd4e979a91612e0e2f13d066fbc",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la invitación a responder",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 5
                    }
                ],
                "requestBody": {
                    "description": "Respuesta a la invitación",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "respuesta"
                                ],
                                "properties": {
                                    "respuesta": {
                                        "description": "true = aceptar, false = rechazar",
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Invitación respondida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invitación aceptada correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo el destinatario puede responder",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Invitación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invitación no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Invitaciones"
                ],
                "summary": "Elimina una invitación",
                "description": "Permite al remitente cancelar una invitación pendiente. Solo el remitente puede eliminar la invitación.",
                "operationId": "4c4c5c86eb08d22b3de23146314dff54",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la invitación a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 5
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Invitación eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invitación eliminada correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo el remitente puede eliminar la invitación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Invitación no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invitación no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/roles": {
            "get": {
                "tags": [
                    "Roles"
                ],
                "summary": "Lista todos los roles del sistema",
                "description": "Obtiene la lista completa de roles disponibles en el sistema (ADMIN, USER). Solo usuarios con rol ADMIN pueden consultar esta lista.",
                "operationId": "b13aa0c279f2e4480dd14ad05991334c",
                "responses": {
                    "200": {
                        "description": "Lista de roles obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "roles": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/RoleResource"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo usuarios ADMIN pueden consultar roles",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/sala_objectives/{salaId}/{m}": {
            "get": {
                "tags": [
                    "Objetivos de Sala"
                ],
                "summary": "Obtener el objetivo de una sala en un mes concreto",
                "operationId": "e17464821839858875fd0362801990f4",
                "parameters": [
                    {
                        "name": "salaId",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "m",
                        "in": "path",
                        "description": "Mes relativo (0=actual, -1=anterior, etc)",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Operación exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "data": {
                                            "example": {
                                                "11-2025": "150.00"
                                            },
                                            "allOf": [
                                                {
                                                    "$ref": "#/components/schemas/SalaObjectiveResource"
                                                }
                                            ]
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            }
        },
        "/sala_objectives/{salaId}": {
            "get": {
                "tags": [
                    "Objetivos de Sala"
                ],
                "summary": "Obtener los objetivos de los últimos 12 meses de una sala",
                "operationId": "3187beb4d12bba3607c09e2bc4986f1e",
                "parameters": [
                    {
                        "name": "salaId",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Operación exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Objetivos de los últimos 12 meses. Si un mes no sale en la lista es que no tiene objetivo asignado."
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "example": {
                                                    "09-2025": "130.00"
                                                },
                                                "allOf": [
                                                    {
                                                        "$ref": "#/components/schemas/SalaObjectiveResource"
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No encontrado"
                    }
                }
            },
            "post": {
                "tags": [
                    "Objetivos de Sala"
                ],
                "summary": "Crear o actualizar el objetivo de una sala para el mes actual",
                "operationId": "6648d1e3b9fb5475669fa3e05010d26e",
                "parameters": [
                    {
                        "name": "salaId",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "amount"
                                ],
                                "properties": {
                                    "amount": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 150
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Operación exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SalaObjectiveResource"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Datos inválidos"
                    }
                }
            }
        },
        "/api/salas/me": {
            "get": {
                "tags": [
                    "Salas"
                ],
                "summary": "Lista las salas del usuario autenticado",
                "description": "Obtiene todas las salas en las que participa el usuario autenticado, incluyendo su rol en cada sala y los otros usuarios de cada sala",
                "operationId": "f52940d8e88d4c0c9b9b002e10942efb",
                "responses": {
                    "200": {
                        "description": "Operación exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "salas": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/UserSalaRolesGetSalasMeResource"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/salas": {
            "post": {
                "tags": [
                    "Salas"
                ],
                "summary": "Crea una nueva sala",
                "description": "Crea una sala y asigna automáticamente al usuario creador como ADMIN de la sala",
                "operationId": "837f039b9f693c6893888555b146e2c7",
                "requestBody": {
                    "description": "Datos de la nueva sala",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre de la sala (mínimo 3 caracteres, máximo 255)",
                                        "type": "string",
                                        "example": "Gastos del piso compartido"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sala creada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala creada correctamente"
                                        },
                                        "sala": {
                                            "$ref": "#/components/schemas/UserSalaRoleResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The name field is required."
                                        },
                                        "errors": {
                                            "properties": {
                                                "name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The name field is required."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/salas/with_invitations": {
            "post": {
                "tags": [
                    "Salas"
                ],
                "summary": "Crea una sala y envía invitaciones",
                "description": "Crea una nueva sala, asigna al usuario creador como ADMIN y envía invitaciones a los emails proporcionados en el mismo request. Los usuarios invitados deben estar registrados en el sistema.",
                "operationId": "c16a9ccb3a553fc95ef8d9a08235aa5a",
                "requestBody": {
                    "description": "Datos de la nueva sala e invitaciones",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "invitaciones"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre de la sala (mínimo 3 caracteres, máximo 255)",
                                        "type": "string",
                                        "example": "Gastos del piso compartido"
                                    },
                                    "invitaciones": {
                                        "description": "Array de emails a invitar (no se permiten duplicados ni invitarse a sí mismo)",
                                        "type": "array",
                                        "items": {
                                            "required": [
                                                "email"
                                            ],
                                            "properties": {
                                                "email": {
                                                    "description": "Email del usuario registrado a invitar",
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "amigo@example.com"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "example": [
                                            {
                                                "email": "usuario1@example.com"
                                            },
                                            {
                                                "email": "usuario2@example.com"
                                            }
                                        ]
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sala creada e invitaciones enviadas exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala creada correctamente y 2 invitación(es) enviada(s)"
                                        },
                                        "sala": {
                                            "$ref": "#/components/schemas/UserSalaRoleResource"
                                        },
                                        "invitaciones_enviadas": {
                                            "description": "Número de invitaciones enviadas",
                                            "type": "integer",
                                            "example": 2
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Email no existe, duplicado, o intento de autoinvitación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "invitaciones.0.email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No puedes invitarte a ti mismo."
                                                    }
                                                },
                                                "invitaciones.1.email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "No se permiten emails duplicados en las invitaciones"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/salas/{id}/{m}": {
            "get": {
                "tags": [
                    "Salas"
                ],
                "summary": "Obtiene el detalle de una sala en un mes específico",
                "description": "Muestra el estado financiero de una sala (ingresos, gastos, balance) y todos sus tiquets en un mes específico. El parámetro 'm' permite navegar entre meses: 0 = mes actual, -1 = mes anterior, -2 = hace 2 meses, 1 = mes siguiente, etc.",
                "operationId": "c2977ee74915a95be90c5af66ea73578",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la sala a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    },
                    {
                        "name": "m",
                        "in": "path",
                        "description": "Desplazamiento del mes respecto al actual (0 = actual, -1 = anterior, 1 = siguiente)",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 0
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle de la sala obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "mes": {
                                            "description": "Mes consultado (1-12)",
                                            "type": "integer",
                                            "example": 11
                                        },
                                        "año": {
                                            "description": "Año consultado",
                                            "type": "integer",
                                            "example": 2025
                                        },
                                        "sala": {
                                            "$ref": "#/components/schemas/SalaResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - El usuario no pertenece a esta sala",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para ver esta sala"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sala no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/salas/{id}": {
            "delete": {
                "tags": [
                    "Salas"
                ],
                "summary": "Elimina una sala",
                "description": "Elimina permanentemente una sala y todas sus relaciones (usuarios, tiquets). Solo los usuarios con rol ADMIN pueden realizar esta acción. Esta operación no se puede deshacer.",
                "operationId": "5cd0ccb14d39baf83f8881550ab35f2c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la sala a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Sala eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala eliminada correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo los ADMIN pueden eliminar la sala",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para modificar esta sala"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sala no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Salas"
                ],
                "summary": "Actualiza el nombre de una sala",
                "description": "Permite actualizar el nombre de una sala. Solo los usuarios con rol ADMIN pueden realizar esta acción",
                "operationId": "7d98b753e8364570684e95bb4cda532e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la sala a actualizar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "requestBody": {
                    "description": "Nuevos datos de la sala",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nuevo nombre de la sala (mínimo 3 caracteres, máximo 255)",
                                        "type": "string",
                                        "example": "Gastos del apartamento 2025"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Sala actualizada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala actualizada correctamente"
                                        },
                                        "sala": {
                                            "$ref": "#/components/schemas/SalaResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo los ADMIN pueden modificar la sala",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No tienes permiso para modificar esta sala"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sala no encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Sala no encontrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The name field is required."
                                        },
                                        "errors": {
                                            "properties": {
                                                "name": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The name must be at least 3 characters."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/salas/{id}/users/{userId}": {
            "delete": {
                "tags": [
                    "Salas"
                ],
                "summary": "Elimina a un usuario de una sala",
                "description": "Permite a un ADMIN eliminar a otro usuario de la sala. No se puede eliminar a uno mismo.",
                "operationId": "5c5d0de49d2bfb7f286c97e3ee6ea96e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "ID del usuario a eliminar de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario eliminado exitosamente - Devuelve la sala del usuario autenticado con los otros usuarios actualizados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario eliminado correctamente de la sala"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Salas"
                ],
                "summary": "Actualiza el rol de un usuario en una sala",
                "description": "Permite a un ADMIN cambiar el rol de otro usuario en la sala. No se puede modificar el propio rol. Roles disponibles: 1=ADMIN, 2=USER",
                "operationId": "ff8305059223cb8aa5501a5f9b9a7160",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    },
                    {
                        "name": "userId",
                        "in": "path",
                        "description": "ID del usuario cuyo rol se quiere modificar",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 3
                        }
                    }
                ],
                "requestBody": {
                    "description": "Nuevo rol para el usuario",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "role_id"
                                ],
                                "properties": {
                                    "role_id": {
                                        "description": "ID del nuevo rol (1=ADMIN, 2=USER)",
                                        "type": "integer",
                                        "example": 2
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Rol actualizado exitosamente - Devuelve la sala del usuario autenticado con los otros usuarios actualizados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Rol actualizado correctamente"
                                        },
                                        "sala": {
                                            "$ref": "#/components/schemas/UserSalaRolesGetSalasMeResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - Solo ADMIN puede modificar roles o intento de modificar el propio rol",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No puedes modificar tu propio rol"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Sala o usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario no encontrado en esta sala"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - role_id inválido o no existe",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The selected role id is invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "role_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "The selected role id is invalid."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/stats/mes/{salaId}/{m}": {
            "get": {
                "tags": [
                    "Stats"
                ],
                "summary": "Estadísticas diarias de un mes para una sala",
                "description": "Devuelve las estadísticas de ingresos y gastos por día del mes seleccionado para la sala indicada, incluyendo acumulados.",
                "operationId": "0a58f63ddcc9122a132eb83203e70523",
                "parameters": [
                    {
                        "name": "salaId",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "m",
                        "in": "path",
                        "description": "Mes relativo (0=actual, -1=anterior, etc)",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Operación exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "salaId": {
                                            "type": "integer"
                                        },
                                        "dias": {
                                            "type": "object",
                                            "example": {
                                                "04-01-2025": {
                                                    "ingresos": 100,
                                                    "gastos": 50,
                                                    "acumulado_ingresos": 100,
                                                    "acumulado_gastos": 50
                                                },
                                                "05-01-2025": {
                                                    "ingresos": 200,
                                                    "gastos": 80,
                                                    "acumulado_ingresos": 300,
                                                    "acumulado_gastos": 130
                                                },
                                                "06-01-2025": {
                                                    "ingresos": 150,
                                                    "gastos": 60,
                                                    "acumulado_ingresos": 450,
                                                    "acumulado_gastos": 190
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "example": 0
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autorizado para acceder a las estadísticas de esta sala."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/stats/last12months/{salaId}": {
            "get": {
                "tags": [
                    "Stats"
                ],
                "summary": "Estadísticas mensuales de los últimos 12 meses para una sala",
                "description": "Devuelve las estadísticas de ingresos y gastos por mes de los últimos 12 meses para la sala indicada, incluyendo acumulados.",
                "operationId": "e24c8ebc4321db05c78698d7069c36ac",
                "parameters": [
                    {
                        "name": "salaId",
                        "in": "path",
                        "description": "ID de la sala",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Operación exitosa",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "salaId": {
                                            "type": "integer"
                                        },
                                        "meses": {
                                            "type": "object",
                                            "example": {
                                                "01-2025": {
                                                    "ingresos": 1000,
                                                    "gastos": 500,
                                                    "acumulado_ingresos": 1000,
                                                    "acumulado_gastos": 500
                                                },
                                                "02-2025": {
                                                    "ingresos": 1200,
                                                    "gastos": 600,
                                                    "acumulado_ingresos": 2200,
                                                    "acumulado_gastos": 1100
                                                },
                                                "03-2025": {
                                                    "ingresos": 900,
                                                    "gastos": 400,
                                                    "acumulado_ingresos": 3100,
                                                    "acumulado_gastos": 1500
                                                }
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "example": 0
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No estás autorizado para acceder a las estadísticas de esta sala."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tiquets": {
            "post": {
                "tags": [
                    "Tiquets"
                ],
                "summary": "Crea un nuevo tiquet",
                "description": "Registra un nuevo tiquet (ingreso o gasto) en una sala específica. Debes ser miembro de la sala para crear tiquets en ella.",
                "operationId": "98b1c403198c55bba507dd919180cbdc",
                "requestBody": {
                    "description": "Datos del tiquet a crear",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "sala_id",
                                    "category_id",
                                    "es_ingreso",
                                    "description",
                                    "amount"
                                ],
                                "properties": {
                                    "sala_id": {
                                        "description": "ID de la sala donde se registra el tiquet",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "category_id": {
                                        "description": "ID de la categoría del tiquet (debe pertenecer a la sala)",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "es_ingreso": {
                                        "description": "true = ingreso, false = gasto",
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "description": {
                                        "description": "Descripción del tiquet",
                                        "type": "string",
                                        "example": "Salario del mes"
                                    },
                                    "amount": {
                                        "description": "Cantidad del tiquet (debe ser positiva)",
                                        "type": "number",
                                        "format": "float",
                                        "example": 1500.5
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tiquet creado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tiquet creado correctamente"
                                        },
                                        "tiquet": {
                                            "$ref": "#/components/schemas/TiquetResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres miembro de la sala",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "sala_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La sala seleccionada no existe."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/tiquets/{id}": {
            "get": {
                "tags": [
                    "Tiquets"
                ],
                "summary": "Obtiene los detalles de un tiquet",
                "description": "Muestra la información completa de un tiquet específico. Solo puedes ver tiquets de salas donde eres miembro.",
                "operationId": "e08a1912811e5191b96ff98296ea3b50",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del tiquet a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tiquet obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "tiquet": {
                                            "$ref": "#/components/schemas/TiquetResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres miembro de la sala del tiquet",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tiquet no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tiquet no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Tiquets"
                ],
                "summary": "Elimina un tiquet",
                "description": "Elimina permanentemente un tiquet de una sala. Solo puedes eliminar tiquets de salas donde eres miembro.",
                "operationId": "1d373b5a98d5f105a775f1e61cf0d77a",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del tiquet a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Tiquet eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tiquet eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres miembro de la sala del tiquet",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tiquet no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tiquet no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Tiquets"
                ],
                "summary": "Actualiza un tiquet existente",
                "description": "Modifica los datos de un tiquet. Solo puedes actualizar tiquets de salas donde eres miembro. Todos los campos son opcionales.",
                "operationId": "2d85a760a57e0f5ee6e2a2da97bc290d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del tiquet a actualizar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "requestBody": {
                    "description": "Campos a actualizar (todos opcionales)",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "category_id": {
                                        "description": "Nueva categoría del tiquet",
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "es_ingreso": {
                                        "description": "Cambiar tipo: true = ingreso, false = gasto",
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "description": {
                                        "description": "Nueva descripción",
                                        "type": "string",
                                        "example": "Compra en supermercado"
                                    },
                                    "amount": {
                                        "description": "Nueva cantidad",
                                        "type": "number",
                                        "format": "float",
                                        "example": 45.99
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Tiquet actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tiquet actualizado correctamente"
                                        },
                                        "tiquet": {
                                            "$ref": "#/components/schemas/TiquetResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres miembro de la sala del tiquet",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Tiquet no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Tiquet no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "category_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "La categoría seleccionada no existe."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users": {
            "get": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Lista todos los usuarios (Solo ADMIN)",
                "description": "Obtiene un listado completo de todos los usuarios registrados en el sistema. Esta operación requiere permisos de administrador.",
                "operationId": "1f30b23b26f6ad43e442ab8371a3fcb7",
                "responses": {
                    "200": {
                        "description": "Lista de usuarios obtenida exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "users": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/UserResource"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres administrador",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Registro de nuevo usuario (Ruta pública)",
                "description": "Crea una cuenta de usuario nueva en el sistema. Esta ruta es pública y no requiere autenticación. La contraseña debe cumplir requisitos de seguridad: mínimo 8 caracteres, al menos una letra mayúscula y un carácter especial.",
                "operationId": "1832160f2b799e4725ff005c0c3c4946",
                "requestBody": {
                    "description": "Datos del usuario a registrar",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "name": {
                                        "description": "Nombre del usuario",
                                        "type": "string",
                                        "example": "Juan Pérez"
                                    },
                                    "email": {
                                        "description": "Email único del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña (mínimo 8 caracteres, 1 mayúscula, 1 carácter especial: !, @, #, $, %)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Password@123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario registrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/UserResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Email ya existe o contraseña no cumple requisitos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El email ya está registrado."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/login": {
            "post": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Inicio de sesión (Ruta pública)",
                "description": "Autentica un usuario con sus credenciales y devuelve un token Bearer para acceder a las rutas protegidas. El token debe incluirse en el header Authorization de las peticiones subsecuentes.",
                "operationId": "d86e8d1159a83d196523bb84a4afe3ad",
                "requestBody": {
                    "description": "Credenciales de acceso",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "Email del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juan@example.com"
                                    },
                                    "password": {
                                        "description": "Contraseña del usuario",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Password@123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login exitoso - Token de acceso generado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Login correcto"
                                        },
                                        "token": {
                                            "description": "Token Bearer para autenticación en endpoints protegidos",
                                            "type": "string",
                                            "example": "3|abcdef1234567890xyz..."
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/UserResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Credenciales incorrectas",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Credenciales incorrectas"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Email o password inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El email es requerido."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/users/logout": {
            "post": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Cierre de sesión",
                "description": "Invalida el token Bearer actual del usuario autenticado. Después de hacer logout, el token ya no será válido y deberá iniciar sesión nuevamente para obtener uno nuevo.",
                "operationId": "76ee169da64cd0b5b7b79571c2ace307",
                "responses": {
                    "200": {
                        "description": "Logout exitoso - Token invalidado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Logout correcto"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me": {
            "delete": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Elimina tu cuenta de usuario",
                "description": "Permite al usuario autenticado eliminar permanentemente su propia cuenta. Esta acción es irreversible y eliminará también sus datos asociados.",
                "operationId": "04499d75a0cf9a919c31dae085f15aa2",
                "responses": {
                    "200": {
                        "description": "Cuenta eliminada exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Te has eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Actualiza tu perfil de usuario",
                "description": "Permite al usuario autenticado actualizar su propia información de perfil (nombre, email, contraseña). Todos los campos son opcionales - solo se actualizan los proporcionados. La contraseña debe cumplir los mismos requisitos de seguridad que en el registro.",
                "operationId": "d93dfc3d93dadb0701bd00c4ecbfea04",
                "requestBody": {
                    "description": "Campos a actualizar (todos opcionales)",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nuevo nombre del usuario",
                                        "type": "string",
                                        "example": "Juan Carlos"
                                    },
                                    "email": {
                                        "description": "Nuevo email del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "example": "juancarlos@example.com"
                                    },
                                    "password": {
                                        "description": "Nueva contraseña (mínimo 8 caracteres, 1 mayúscula, 1 carácter especial)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "NewPassword@456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/UserResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Email ya existe o contraseña no cumple requisitos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "email": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El email ya está en uso."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/{id}": {
            "get": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Obtiene los detalles de un usuario (Solo ADMIN)",
                "description": "Muestra la información completa de un usuario específico. Esta operación requiere permisos de administrador.",
                "operationId": "ad02f444956757c9ee936db581431223",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario a consultar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 1
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario obtenido exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/UserResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres administrador",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Elimina un usuario (Solo ADMIN)",
                "description": "Permite a un administrador eliminar permanentemente cualquier cuenta de usuario. Esta acción es irreversible y eliminará también los datos asociados al usuario.",
                "operationId": "9e547a619742530100eb42a1143ace3e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 5
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Usuario eliminado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres administrador",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Gestión de Usuarios"
                ],
                "summary": "Actualiza un usuario específico (Solo ADMIN)",
                "description": "Permite a un administrador actualizar la información de cualquier usuario, incluyendo su rol. Todos los campos son opcionales - solo se actualizan los proporcionados.",
                "operationId": "b9d249c6203ad7216d4d7ef11a7e8596",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID del usuario a actualizar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        },
                        "example": 5
                    }
                ],
                "requestBody": {
                    "description": "Campos a actualizar (todos opcionales)",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "description": "Nuevo nombre del usuario",
                                        "type": "string",
                                        "example": "María García"
                                    },
                                    "email": {
                                        "description": "Nuevo email del usuario",
                                        "type": "string",
                                        "format": "email",
                                        "example": "maria@example.com"
                                    },
                                    "role_id": {
                                        "description": "ID del nuevo rol (1=admin, 2=user)",
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "password": {
                                        "description": "Nueva contraseña (mínimo 8 caracteres, 1 mayúscula, 1 carácter especial)",
                                        "type": "string",
                                        "format": "password",
                                        "example": "Password@789"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Usuario actualizado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "1"
                                        },
                                        "user": {
                                            "$ref": "#/components/schemas/UserResource"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "No autenticado - Token inválido o expirado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Sin permisos - No eres administrador",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Usuario no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "0"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación - Datos inválidos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "The given data was invalid."
                                        },
                                        "errors": {
                                            "properties": {
                                                "role_id": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string",
                                                        "example": "El rol seleccionado no existe."
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "CategoryResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Comida"
                    }
                },
                "type": "object"
            },
            "InvitacionResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "invitador": {
                        "type": "string",
                        "example": "Señor Pepe (admin)"
                    },
                    "invitado": {
                        "type": "string",
                        "example": "Señor Juan (user)"
                    },
                    "sala": {
                        "type": "string",
                        "example": "Sala 1"
                    }
                },
                "type": "object"
            },
            "RoleResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Admin"
                    }
                },
                "type": "object"
            },
            "SalaObjectiveResource": {
                "type": "object",
                "example": {
                    "11-2025": "150.00"
                }
            },
            "SalaResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Sala 1"
                    },
                    "ingresos": {
                        "type": "integer",
                        "example": 1000
                    },
                    "gastos": {
                        "type": "integer",
                        "example": 500
                    },
                    "balance": {
                        "type": "integer",
                        "example": 500
                    },
                    "otros_usuarios": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 2
                                },
                                "name": {
                                    "type": "string",
                                    "example": "Juan Pérez"
                                },
                                "sala_role": {
                                    "type": "string",
                                    "example": "user"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "tiquets": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/TiquetResource"
                        }
                    }
                },
                "type": "object"
            },
            "TiquetResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_name": {
                        "type": "string",
                        "example": "Señor Pepe (admin)"
                    },
                    "category_name": {
                        "type": "string",
                        "example": "Comida"
                    },
                    "es_ingreso": {
                        "type": "boolean",
                        "example": true
                    },
                    "description": {
                        "type": "string",
                        "example": "Pizza"
                    },
                    "amount": {
                        "type": "integer",
                        "example": 1000
                    },
                    "created_at": {
                        "type": "string",
                        "example": "2023-01-01 00:00:00"
                    }
                },
                "type": "object"
            },
            "UserResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Señor Pepe (admin)"
                    },
                    "email": {
                        "type": "string",
                        "example": "pepe@pepe.com"
                    },
                    "role": {
                        "type": "string",
                        "example": "Admin"
                    },
                    "salas": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/UserSalaRoleResource"
                        }
                    }
                },
                "type": "object"
            },
            "UserSalaRoleResource": {
                "properties": {
                    "sala_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "sala_name": {
                        "type": "string",
                        "example": "Sala 1"
                    },
                    "role_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "role_name": {
                        "type": "string",
                        "example": "Admin"
                    }
                },
                "type": "object"
            },
            "UserSalaRolesGetSalasMeResource": {
                "properties": {
                    "sala_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "sala_name": {
                        "type": "string",
                        "example": "Sala 1"
                    },
                    "role_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "role_name": {
                        "type": "string",
                        "example": "Admin"
                    },
                    "otros_usuarios_sala": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 2
                                },
                                "name": {
                                    "type": "string",
                                    "example": "Juan Pérez"
                                },
                                "sala_role": {
                                    "type": "string",
                                    "example": "user"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "description": "Ingresa un token válido",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Objetivos de Sala",
            "description": "Endpoints para gestionar los objetivos mensuales de una sala."
        },
        {
            "name": "Categorías",
            "description": "Categorías"
        },
        {
            "name": "Invitaciones",
            "description": "Invitaciones"
        },
        {
            "name": "Roles",
            "description": "Roles"
        },
        {
            "name": "Salas",
            "description": "Salas"
        },
        {
            "name": "Stats",
            "description": "Stats"
        },
        {
            "name": "Tiquets",
            "description": "Tiquets"
        },
        {
            "name": "Gestión de Usuarios",
            "description": "Gestión de Usuarios"
        }
    ]
}