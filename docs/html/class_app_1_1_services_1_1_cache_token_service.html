<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Money-Link: App\Services\CacheTokenService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Money-Link
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_app_1_1_services_1_1_cache_token_service.html','','class_app_1_1_services_1_1_cache_token_service-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">App\Services\CacheTokenService Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class CacheTokenService.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7c984de8a44e27669a8b2bbc69340a02" id="r_a7c984de8a44e27669a8b2bbc69340a02"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7c984de8a44e27669a8b2bbc69340a02">generateToken</a> (<a class="el" href="class_app_1_1_models_1_1_user.html">User</a> $user)</td></tr>
<tr class="memdesc:a7c984de8a44e27669a8b2bbc69340a02"><td class="mdescLeft">&#160;</td><td class="mdescRight">GenerateToken.Genera un token para el usuario y lo guarda en cache.  <br /></td></tr>
<tr class="memitem:aad367be20ce097a2d905688bb7d46019" id="r_aad367be20ce097a2d905688bb7d46019"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad367be20ce097a2d905688bb7d46019">buscoUsuarioEnCache</a> (<a class="el" href="class_app_1_1_models_1_1_user.html">User</a> $user)</td></tr>
<tr class="memdesc:aad367be20ce097a2d905688bb7d46019"><td class="mdescLeft">&#160;</td><td class="mdescRight">buscoUsuarioEnCache.  <br /></td></tr>
<tr class="memitem:a53856a740b7149b86c40b536a67313ae" id="r_a53856a740b7149b86c40b536a67313ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53856a740b7149b86c40b536a67313ae">borrarUsuarioDeCache</a> (<a class="el" href="class_app_1_1_models_1_1_user.html">User</a> $user)</td></tr>
<tr class="memdesc:a53856a740b7149b86c40b536a67313ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">borrarUsuarioDeCache.  <br /></td></tr>
<tr class="memitem:a2b9d4846d40616fc0ddc7396353db5e0" id="r_a2b9d4846d40616fc0ddc7396353db5e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b9d4846d40616fc0ddc7396353db5e0">crearTokenParaUsuario</a> (<a class="el" href="class_app_1_1_models_1_1_user.html">User</a> $user)</td></tr>
<tr class="memdesc:a2b9d4846d40616fc0ddc7396353db5e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">crearTokenParaUsuario.  <br /></td></tr>
<tr class="memitem:a7508861aaa952a284e57d388b346b02e" id="r_a7508861aaa952a284e57d388b346b02e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7508861aaa952a284e57d388b346b02e">buscoTokenEnCacheDevuelvoIdUsuario</a> (string $token)</td></tr>
<tr class="memdesc:a7508861aaa952a284e57d388b346b02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">buscoTokenEnCacheDevuelvoIdUsuario.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-attribs" class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae75a4fb6909ca37c2b1e2937330d0e94" id="r_ae75a4fb6909ca37c2b1e2937330d0e94"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae75a4fb6909ca37c2b1e2937330d0e94">$tiempoExpiracionToken</a> = 1800</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class CacheTokenService. </p>
<p>Clase que gestiona los tokens de los usuarios con Redis </p><dl class="section author"><dt>Author</dt><dd>Lluís Ferrater </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a53856a740b7149b86c40b536a67313ae" name="a53856a740b7149b86c40b536a67313ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53856a740b7149b86c40b536a67313ae">&#9670;&#160;</a></span>borrarUsuarioDeCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Services\CacheTokenService::borrarUsuarioDeCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_app_1_1_models_1_1_user.html">User</a></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>borrarUsuarioDeCache. </p>
<p>Borra el token y el usuario de cache </p><dl class="section author"><dt>Author</dt><dd>Lluís Ferrater </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7508861aaa952a284e57d388b346b02e" name="a7508861aaa952a284e57d388b346b02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7508861aaa952a284e57d388b346b02e">&#9670;&#160;</a></span>buscoTokenEnCacheDevuelvoIdUsuario()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Services\CacheTokenService::buscoTokenEnCacheDevuelvoIdUsuario </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>$token</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>buscoTokenEnCacheDevuelvoIdUsuario. </p>
<p>Busca un token en cache y devuelve el id de usuario si lo encuentra. Si lo encuentra, actualiza el tiempo de expiración de las dos entradas. Es la funcion que usa inicialmente los middlewares para verificar token </p><dl class="section author"><dt>Author</dt><dd>Lluís Ferrater </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$token</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int $userId </dd></dl>

</div>
</div>
<a id="aad367be20ce097a2d905688bb7d46019" name="aad367be20ce097a2d905688bb7d46019"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad367be20ce097a2d905688bb7d46019">&#9670;&#160;</a></span>buscoUsuarioEnCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Services\CacheTokenService::buscoUsuarioEnCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_app_1_1_models_1_1_user.html">User</a></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>buscoUsuarioEnCache. </p>
<p>Busca si el usuario tiene un token en cache </p><dl class="section author"><dt>Author</dt><dd>Lluís Ferrater </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a id="a2b9d4846d40616fc0ddc7396353db5e0" name="a2b9d4846d40616fc0ddc7396353db5e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9d4846d40616fc0ddc7396353db5e0">&#9670;&#160;</a></span>crearTokenParaUsuario()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Services\CacheTokenService::crearTokenParaUsuario </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_app_1_1_models_1_1_user.html">User</a></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>crearTokenParaUsuario. </p>
<p>Crea un token para el usuario y lo guarda en cache. El token se guarda con un tiempo de expiración. Se guarda dos entradas, una para el token y otra para el usuario, para facil acceso </p><dl class="section author"><dt>Author</dt><dd>Lluís Ferrater </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Uuid $token </dd></dl>

</div>
</div>
<a id="a7c984de8a44e27669a8b2bbc69340a02" name="a7c984de8a44e27669a8b2bbc69340a02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c984de8a44e27669a8b2bbc69340a02">&#9670;&#160;</a></span>generateToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">App\Services\CacheTokenService::generateToken </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_app_1_1_models_1_1_user.html">User</a></td>          <td class="paramname"><span class="paramname"><em>$user</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GenerateToken.Genera un token para el usuario y lo guarda en cache. </p>
<dl class="section author"><dt>Author</dt><dd>Lluís Ferrater </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">User</td><td class="paramname">$user</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Uuid $token </dd></dl>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="ae75a4fb6909ca37c2b1e2937330d0e94" name="ae75a4fb6909ca37c2b1e2937330d0e94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae75a4fb6909ca37c2b1e2937330d0e94">&#9670;&#160;</a></span>$tiempoExpiracionToken</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int App\Services\CacheTokenService::$tiempoExpiracionToken = 1800</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>app/Services/<a class="el" href="_cache_token_service_8php.html">CacheTokenService.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>App</b></li><li class="navelem"><a href="namespace_app_1_1_services.html">Services</a></li><li class="navelem"><a href="class_app_1_1_services_1_1_cache_token_service.html">CacheTokenService</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
